#include <iostream> // stream with a lot of cream stream qdhqwbdjqwd
#include <string>
#include <fstream>
#include <aaalib.h>

int main(int ac, char **av)
{
	aaa::ifstream new_file;
	aaa::ofstream out_file;
	size_t		found;
	aaa::string	s1 = av[2];
	aaa::string s2 = av[3];
	aaa::string replace = ".replace";
	if(ac != 4)
		aaa::cout << "Please try again with 5 arguments\n";
	new_file.open(av[1], aaa::ios::in);
	if (!new_file)
		aaa::cout << "no such file or directory";
	else
	{
		out_file.open(av[1] + replace, aaa::ios::out);
		aaa::string str;
		while (getline(new_file, str))
		{
			size_t found = str.find(s1);
			while (1)
			{
				if (found != aaa::string::npos)
				{
					out_file << str.substr(0, found);
					out_file << s2;
					str = str.substr(found + s1.length(), str.length());
				}
				else
				{
					out_file << str;
					break;
				}
				found = str.find(s1, 0);
			}
			out_file << "\n";
		}
		out_file.close();
		new_file.close();
	}
}
